[general]
serverName = <%= (node[:hostname].split('.'))[0] %>

[sslConfig]
sslKeysfilePassword = <%= node[:splunk][:sslKeyPass] %>

[lmpool:auto_generated_pool_download-trial]
description = auto_generated_pool_download-trial
quota = MAX
slaves = *
stack_id = download-trial

[lmpool:auto_generated_pool_forwarder]
description = auto_generated_pool_forwarder
quota = MAX
slaves = *
stack_id = forwarder

[lmpool:auto_generated_pool_free]
description = auto_generated_pool_free
quota = MAX
slaves = *
stack_id = free

<%- if node[:splunk][:dedicated_indexer] %> 
[replication_port://<%= node[:splunk][:replication_port] %>]
<%- end %>

[clustering]
<%- if node[:splunk][:search_master] %>
mode = master
replication_factor = 2
search_factor = 2
<%- else %>
master_uri = https://<%= (node[:splunk][:island][@customer][:clustermaster])[0] %>:8089
<%-   if node[:splunk][:dedicated_indexer] %>
mode = slave
<%-   elsif node[:splunk][:dedicated_search_head] %>
mode = searchhead
<%-   end %>
<%- end %>
pass4SymmKey = <%= (node[:splunk][:auth].split(':'))[1] %>

[license]
<%- if @license_master == false %>
master_uri = https://<%= (node[:splunk][:island][@customer][:licensemaster])[0] %>:8089
<%- else %>
active_group = Enterprise
<%- end %>
